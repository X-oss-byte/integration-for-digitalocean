{
	"variables": {
		"token": "{{env `DIGITALOCEAN_TOKEN`}}",
		"image_name": "appwrite-0.8.0-snapshot-{{timestamp}}"
	},
	"sensitive-variables": [ "token" ],
	"builders": [
		{
			"type": "digitalocean",
			"api_token": "{{user `token`}}",
			"image": "ubuntu-20-04-x64",
			"region": "nyc3",
			"size": "s-1vcpu-1gb",
			"ssh_username": "root",
			"snapshot_name": "{{user `image_name`}}"
		}
	],
	"provisioners": [
		{
			"type": "shell",
			"inline": [ "cloud-init status --wait" ]
		},
		{
			"type": "file",
			"source": "files/etc/",
			"destination": "/etc/"
		},
		{
			"type": "file",
			"source": "files/var/",
			"destination": "/var/"
		},
		{
			"type": "shell",
			"scripts": [
				"scripts/01-docker-install.sh",
				"scripts/02-setup-appwrite-scripts.sh",
				"scripts/03-docker-test.sh"
			]
		}
	]
}